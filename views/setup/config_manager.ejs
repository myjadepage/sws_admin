<%- include('../inc/head') %>

    <div id="container">

        <%- include('../inc/sidebar') %>

            <div id="contents">
                <h3>
                    <%= title %>
                </h3>
                <ul class="navi">
                    <li class="home"><a href="/" target="_top"><i class="xi-home"></i></a></li>
                    <li>환경설정</li>
                    <li class="on">
                        <%= title %>
                    </li>
                </ul>
                <ul class="helpbox">
                    <li>관리자정보는 관리자사이트 접속시 적용됩니다. 보안을 위해 아이디와 패스워드는 자주 바꿔주시는게 좋습니다.</li>
                    <li>관리자명에 입력한 이름은 게시판 관리시에 글쓴이로 등록됩니다.</li>
                    <li>사업자 정보에 입력하신 정보는 기본적으로 쇼핑몰 하단 카피라이트부분에 보여집니다.</li>
                    <li>변동사항이 있을시에는 반드시 변경해주시기 바랍니다.</li>
                </ul>

                <form name="formInputAdmin" id="formInputAdmin">
                    <!-- 관리자정보 -->
                    <div class="box">
                        <div class="section_head">
                            <h4><i class="xi-check-circle"></i> 관리자정보</h4>
                        </div>

                        <table class="t_form">
                            <caption>관리자 정보입력</caption>
                            <tbody>
                                <tr>
                                    <th>관리자 아이디</th>
                                    <td>
                                        <input type="text" name="adminId" value="" placeholder="admin" class="text_input" maxlength="20">
                                        <span class="square_blue"><i class="xi-error"></i>영문 또는 숫자 4~20자.</span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>관리자 비밀번호</th>
                                    <td>
                                        <input type="checkbox" name="isChangePw" value="T" onclick="checkChangePw();">비밀번호 수정
                                        <div id="divPw" style="display:none;">
                                            <input type="text" name="adminPw" value="" class="text_input" style="width:150px" maxlength="20">
                                            <span class="square_blue"><i class="xi-error"></i>영문, 숫자 조합 6~20자.</span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th>관리자명</th>
                                    <td><input type="text" name="adminName" value="" placeholder="관리자" class="text_input" maxlength="15"></td>
                                </tr>
                                <tr>
                                    <th>관리자 메일</th>
                                    <td>
                                        <input type="text" name="siteEmail" value="" placeholder="aaa@aaaa.com" class="text_input" style="width:300px" maxlength="100">
                                        <span class="square_blue"><i class="xi-error"></i>Contact us, 고객의 소리, 제휴문의 등을 고객이 이용시 본 이메일로 받아볼 수 있습니다.</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 관리자정보 -->

                    <!-- 사업자정보 -->
                    <div class="box">
                        <div class="section_head">
                            <h4><i class="xi-check-circle"></i> 사업자정보</h4>
                        </div>

                        <table class="t_form">
                            <caption>사업자 정보입력</caption>
                            <colgroup>
                                <col width="200">
                                <col width="*">
                                <col width="200">
                                <col width="*">
                            </colgroup>

                            <tbody>
                                <tr>
                                    <th>상점명(사이트명)</th>
                                    <td colspan="3">
                                        <input type="text" name="siteName" value="" placeholder="쉘위샵" class="text_input" maxlength="50">
                                        <span class="square_blue"><i class="xi-error"></i>사이트명은 문장속에서 많이 쓰이입니다. 간단하고 짧게 써 주시기 바랍니다.</span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>대표자명</th>
                                    <td colspan="3"><input type="text" name="ceoName" value="" class="text_input" maxlength="10"></td>
                                </tr>
                                <tr>
                                    <th>개인정보 관리자</th>
                                    <td colspan="3">
                                        <input type="text" value="" name="securityName" class="text_input" maxlength="10"> ( <input type="text" value="" name="securityEmail" class="text_input" maxlength="100"> )
                                        <span class="square_blue"><i class="xi-error"></i>개인정보관리자를 임명하시어 임명자의 성명과 이메일 주소를 적어주세요.</span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>입점업체 담당자</th>
                                    <td colspan="3">
                                        <input type="text" value="" name="mdName" class="text_input" maxlength="10"> ( <input type="text" value="" name="mdEmail" class="text_input" maxlength="100"> )
                                        <span class="square_blue"><i class="xi-error"></i>입점업체 담당자(MD)를 임명하시어 임명자의 성명과 이메일 주소를 적어주세요.</span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>회사명</th>
                                    <td colspan="3"><input type="text" value="" name="comName" class="text_input" style="width:300px" maxlength="50"></td>
                                </tr>
                                <tr>
                                    <th>회사 주소</th>
                                    <td colspan="3">
                                        <input type="text" id="postcode" placeholder="우편번호" maxlength="7" class="text_input" style="width:70px">
                                        <button class="btn btn-sm btn-secondary" onclick="execDaumPostcode()">우편번호 찾기</button>
                                        <div class="mgt3">
                                            <input type="text" id="roadAddress" placeholder="도로명주소" maxlength="50" class="text_input" style="width:48%" readonly>
                                            <input type="text" id="jibunAddress" placeholder="지번주소" maxlength="50" class="text_input" style="width:48%" readonly>
                                        </div>
                                        <span id="guide" style="color:#999;display:none"></span>
                                        <div class="mgt3">
                                            <input type="text" id="detailAddress" placeholder="상세주소" maxlength="50" class="text_input" style="width:30%">
                                            <input type="text" id="extraAddress" placeholder="참고항목" maxlength="50" class="text_input" style="width:16.2%">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th>대표전화</th>
                                    <td><input type="text" value="" name="comTel" class="text_input" maxlength="20"></td>
                                    <th>Fax</th>
                                    <td><input type="text" value="" name="comFax" class="text_input" maxlength="20"></td>
                                </tr>
                                <tr>
                                    <th>사업자등록번호</th>
                                    <td><input type="text" value="" name="bizNo" class="text_input" maxlength="12"></td>
                                    <th>통신판매업신고번호</th>
                                    <td><input type="text" value="" name="tongsinNo" class="text_input" maxlength="20"></td>
                                </tr>
                                <tr>
                                    <th>업태</th>
                                    <td><input type="text" value="" name="bizCondition" class="text_input" maxlength="20"></td>
                                    <th>종목</th>
                                    <td><input type="text" value="" name="bizItem" class="text_input" maxlength="20"></td>
                                </tr>
                                <tr>
                                    <th>호스팅서비스 업체명</th>
                                    <td colspan="3">
                                        <input type="text" value="." name="hostingService" class="text_input" style="width:25%" maxlength="50">
                                        <span class="square_blue"><i class="xi-error"></i>호스팅서비스 업체명을 입력해주세요.</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 사업자정보 -->

                    <!-- 설명 -->
                    <div class="mgt20"><img src="/img/icon_tip.gif" alt="TIP"></div>
                    <div class="tip_box2">
                        <span>사업자등록 정보는 세금계산서 발급시에 이용되므로 정확하게 입력해주셔야 합니다.</span>
                    </div>
                    <!-- 설명 -->

                    <div class="btn_center">
                        <button type="button" class="btn btn-info" id="btnInputAdmin">확인</button>
                        <button type="button" class="btn btn-secondary" onclick="cancle('back');">취소</button>
                    </div>
                </form>


                <%- include('../inc/footer') %>


                    <!-- 다음 우편번호 api -->
                    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                    <script>
                        function execDaumPostcode() {
                            new daum.Postcode({
                                oncomplete: function(data) {
                                    var roadAddr = data.roadAddress; // 도로명 주소 변수
                                    var extraRoadAddr = ''; // 참고 항목 변수

                                    if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                                        extraRoadAddr += data.bname;
                                    }
                                    if (data.buildingName !== '' && data.apartment === 'Y') {
                                        extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                                    }
                                    if (extraRoadAddr !== '') {
                                        extraRoadAddr = ' (' + extraRoadAddr + ')';
                                    }
                                    document.getElementById('postcode').value = data.zonecode;
                                    document.getElementById("roadAddress").value = roadAddr;
                                    document.getElementById("jibunAddress").value = data.jibunAddress;

                                    if (roadAddr !== '') {
                                        document.getElementById("extraAddress").value = extraRoadAddr;
                                    } else {
                                        document.getElementById("extraAddress").value = '';
                                    }

                                    var guideTextBox = document.getElementById("guide");
                                    if (data.autoRoadAddress) {
                                        var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
                                        guideTextBox.innerHTML = '(예상 도로명 주소 : ' + expRoadAddr + ')';
                                        guideTextBox.style.display = 'block';

                                    } else if (data.autoJibunAddress) {
                                        var expJibunAddr = data.autoJibunAddress;
                                        guideTextBox.innerHTML = '(예상 지번 주소 : ' + expJibunAddr + ')';
                                        guideTextBox.style.display = 'block';
                                    } else {
                                        guideTextBox.innerHTML = '';
                                        guideTextBox.style.display = 'none';
                                    }
                                }
                            }).open();
                        }
                    </script>


                    <script>
                        $('#btnInputAdmin').on('click', function() {
                            // 입력값 유효성검사
                            //<![CDATA[
                            // var f = {}
                            // f.adminId = $('input[name="adminId"]').val();
                            // f.adminName = $('input[name="adminName"]').val();
                            // f.adminPw = $('input[name="adminPw"]').val();
                            // f.siteEmail = $('input[name="siteEmail"]').val();
                            // f.siteName = $('input[name="siteName"]').val();
                            // f.ceoName = $('input[name="ceoName"]').val();
                            // f.securityName = $('input[name="securityName"]').val();
                            // f.securityEmail = $('input[name="securityEmail"]').val();
                            // f.comName = $('input[name="comName"]').val();
                            // f.comPost = $('input[name="comPost"]').val();
                            // f.comTel = $('input[name="comTel"]').val();
                            // f.bizNo = $('input[name="bizNo"]').val();
                            // f.tongsinNo = $('input[name="tongsinNo"]').val();
                            // f.hostingService = $('input[name="hostingService"]').val();
                            // console.log(JSON.stringify(f.adminId));

                            if (isEmpty(f.adminId.value)) {
                                alert("관리자 아이디을 입력해 주세요.");
                                $('input[name="adminId"]').focus();
                                return false;
                            }
                            if (checkInvalidId(f.adminId.value, 4, 20)) {
                                alert("관리자 아이디는 영문 또는 숫자 4~20자로 입력해 주세요.");
                                $('input[name="adminId"]').focus();
                                return false;
                            }
                            if ($("input[name='isChangePw']").prop("checked")) {
                                if (isEmpty(f.adminPw.value)) {
                                    alert("관리자 비밀번호를 입력해 주세요.");
                                    $('input[name="adminPw"]').focus();
                                    return false;
                                }

                                switch (checkInvalidPw(f.adminId.value, f.adminPw.value, 6, 20)) {
                                    case 1:
                                        alert("비밀번호는 아이디와 동일하게 사용할 수 없습니다.");
                                        return false;
                                    case 2:
                                        alert("비밀번호는 영문 대/소문자, 숫자를 조합하여 6~20자리로 해주세요.");
                                        return false;
                                }
                            }
                            if (isEmpty(f.adminName.value)) {
                                alert("관리자명을 입력해 주세요.");
                                f.adminName.focus();
                                return false;
                            }

                            if (isEmpty(f.siteEmail.value)) {
                                alert("관리자 메일을 입력해 주세요.");
                                f.siteEmail.focus();
                                return false;
                            }
                            if (isEmpty(f.siteName.value)) {
                                alert("상점명을 입력해 주세요.");
                                f.siteName.focus();
                                return false;
                            }
                            if (isEmpty(f.ceoName.value)) {
                                alert("대표자명을 입력해 주세요.");
                                f.ceoName.focus();
                                return false;
                            }
                            if (isEmpty(f.securityName.value)) {
                                alert("개인정보관리자명을 입력해 주세요.");
                                f.securityName.focus();
                                return false;
                            }
                            if (isEmpty(f.securityEmail.value)) {
                                alert("개인정보관리자 이메일을 입력해 주세요.");
                                f.securityEmail.focus();
                                return false;
                            }
                            if (isEmpty(f.comName.value)) {
                                alert("회사명을 입력해 주세요.");
                                f.comName.focus();
                                return false;
                            }
                            if (isEmpty(f.comPost.value)) {
                                alert("우편번호를 선택해 주세요.");
                                f.comPost.focus();
                                return false;
                            }

                            if (isEmpty(f.comTel.value)) {
                                alert("대표전화를 입력해 주세요.");
                                f.comTel.focus();
                                return false;
                            }
                            if (isEmpty(f.bizNo.value)) {
                                alert("사업자등록번호를 입력해 주세요.");
                                f.bizNo.focus();
                                return false;
                            }
                            if (isEmpty(f.tongsinNo.value)) {
                                alert("통신판매업신고번호를 입력해 주세요.");
                                f.tongsinNo.focus();
                                return false;
                            }
                            if (isEmpty(f.hostingService.value)) {
                                alert("호스팅서비스 업체명을 입력해 주세요.");
                                f.hostingService.focus();
                                return false;
                            }
                            if (!confirm("등록하시겠습니까?")) {
                                return false;

                                ///<!--------
                                // ajax호출등록
                                ///<!-------->

                            }

                            //]]>
                        });

                        // 관리자 비밀번호변경
                        function checkChangePw() {
                            if ($("input[name='isChangePw']").prop("checked")) {
                                $("#divPw").show();
                            } else {
                                $("#divPw").hide();
                            }
                        }
                    </script>




                    </body>

                    </html>